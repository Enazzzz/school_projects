<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Zane's GitHub Project Hub</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body { font-family: system-ui,sans-serif; background:#181a1b; color:#e4e6eb; margin:0; display:flex; flex-direction:column; align-items:center; min-height:100vh;}
  header { margin:50px 0 20px; text-align:center;}
  #projects { display:grid; grid-template-columns:repeat(auto-fit, minmax(240px,1fr)); gap:20px; width:90%; max-width:900px; padding:20px;}
  .project-link { background:#23272f; padding:18px; border-radius:10px; text-align:center; cursor:pointer; transition: transform 0.2s, background 0.2s;}
  .project-link:hover { background:#0078d4; transform:translateY(-3px);}
  #viewer { position:fixed; inset:0; display:none; flex-direction:column; z-index:999; background:#000;}
  #backBtn { position:absolute; top:15px; left:15px; padding:10px 18px; border:none; border-radius:6px; background:#0078d4; color:#fff; cursor:pointer; z-index:1000;}
  #backBtn:hover { background:#005fa3; }
  #iframeView { flex:1; width:100%; border:none; }
</style>
</head>
<body>

<header>
  <h1>Zane’s Project Hub</h1>
  <p>Click a project to load it fullscreen.</p>
</header>

<main id="projects"></main>

<div id="viewer">
  <button id="backBtn" onclick="closeViewer()">← Back</button>
  <iframe id="iframeView"></iframe>
</div>

<script>
const projects = [
  { owner: "Enazzzz", repo: "SSWebsite" },
  { owner: "Enazzzz", repo: "TypeScript" }
];

async function loadProjects() {
  const container = document.getElementById("projects");
  for (const p of projects) {
    try {
      const res = await fetch(`/api/fetchRepo?owner=${p.owner}&repo=${p.repo}`);
      const data = await res.json();
      const firstHTML = Object.values(data.html)[0]; // index.html
      if (!firstHTML) continue;

      const div = document.createElement("div");
      div.className = "project-link";
      div.textContent = p.repo;
      div.onclick = () => openViewer(firstHTML);
      container.appendChild(div);
    } catch(e) {
      console.error(e);
    }
  }
}

function openViewer(url) {
  const iframe = document.getElementById("iframeView");
  const viewer = document.getElementById("viewer");
  iframe.src = `/api/fetchHTML?url=${encodeURIComponent(url)}`;
  viewer.style.display = "flex";
}

function closeViewer() {
  document.getElementById("iframeView").src = "";
  document.getElementById("viewer").style.display = "none";
}

loadProjects();
</script>
</body>
</html>
